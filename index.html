<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chamados TI</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="container">
      <div class="form-image">
        <img src="img/programador.svg" />
      </div>
      <div class="form">
        <form name="chamados" action="https://obrigada.neocities.org/">
          <div class="form-header">
            <div class="title">
              <h1>Preencha com seus dados</h1>
            </div>
          </div>
          <div class="input-group">
            <div class="input-box"><label for="data">Digite a data de hoje</label>
            <input id="text"
             type="date"
             name="data"
             placeholder="Dia/mês/ano"
             change (pt-BR) required /></div>
            <div class="input-box">
              <label for="text">Assunto do chamado</label>
              <input
                id="titulo"
                type="text"
                name="titulo"
                placeholder="Digite aqui"
                required
              />
            </div>
            <div class="input-box">
              <label for="textarea">Descrição</label>
              <input
                id="descricao"
                type="text"
                name="descricao"
                placeholder="Digite aqui"
                required
              />

              <div class="input-box">
                <label for="firstname">Primeiro nome</label>
                <input
                  id="nome"
                  type="text"
                  name="nome"
                  placeholder="Digite seu primeiro nome"
                  required
                />
                <label for="lastname">Sobrenome</label>
                <input
                  id="sobrenome"
                  type="text"
                  name="sobrenome"
                  placeholder="Digite seu sobrenome"
                  required
                />
              </div>
              <div class="campo">
                <label>Secretaria</label>
                <select id="Secretaria" name="secretaria" required>
                  <option selected disabled value="">Selecione</option>
                  <option>Administração</option>
                  <option>Assistência Social</option>
                  <option>Casa Civil</option>
                  <option>Comunicação Social</option>
                  <option>Controle Interno e Transparência</option>
                  <option>Cultura e Turismo</option>
                  <option>Desenvolvimento Econômico e Inovação</option>
                  <option>Educação</option>
                  <option>Esporte e Lazer</option>
                  <option>Finanças</option>
                  <option>Gabinete do vice-prefeito</option>
                  <option>Infraestrutura</option>
                  <option>Meio ambiente</option>
                  <option>Planejamento e Assuntos Estratégicos</option>
                  <option>Procuradoria Geral</option>
                  <option>Receita</option>
                  <option>São José Previdência</option>
                  <option>Saúde</option>
                  <option>Segurança</option>
                  <option>SUSP</option>
                </select>
              </div>
              <br />
              <div class="input-box">
                <label for="text">Setor</label>
                <input
                  id="setor"
                  type="text"
                  name="setor"
                  placeholder="Setor"
                  required
                />
              </div>
              <div class="input-box">
                <label for="number">Ramal ou número para contato</label>
                <input
                  id="ramal"
                  type="tel"
                  name="ramal"
                  placeholder="Digite seu ramal ou número para contato"
                  required
                />
              </div>
              <div class="input-box">
                <label for="email">E-mail</label>
                <input
                  id="email"
                  type="email"
                  name="email"
                  placeholder="Digite seu email"
                  required
                />
              </div>
              <div class="solicitacao-input">
                <label for="Solicitacao" name="solicitacao" id="solicitacao"
                  >Solicitação:</label
                >
                <label>
                  <input
                    type="radio"
                    name="solicitacao"
                    value="Acesso a pastas / Criação de usuário"
                  />Acesso a pastas
                </label>
                <label>
                  <input
                    type="radio"
                    name="solicitacao"
                    required
                    value="Acesso a pastas / Criação de usuário"
                  />Criação de usuário
                </label>
                <label>
                  <input
                    type="radio"
                    name="solicitacao"
                    value="Certificado Digital"
                  />Certificado Digital
                </label>
                <label>
                  <input
                    type="radio"
                    name="solicitacao"
                    value="Computador"
                  />Computador
                </label>
                <label>
                  <input type="radio" name="solicitacao" value="E-mail" />E-mail
                </label>
                <label>
                  <input
                    type="radio"
                    name="solicitacao"
                    value="Monitor"
                  />Monitor
                </label>
                <label>
                  <input
                    type="radio"
                    name="solicitacao"
                    value="Mouse / teclado"
                  />Mouse / teclado
                </label>
                <label>
                  <input type="radio" name="solicitacao" value="Rede" />Rede
                </label>
                <label>
                  <input
                    type="radio"
                    name="solicitacao"
                    value="Sites / Softwares"
                  />Sites / Softwares
                </label>
                <label>
                  <input
                    type="radio"
                    name="solicitacao"
                    value="Telefone"
                  />Telefone
                </label>
                <label>
                  <input type="radio" name="solicitacao" value="Outros" />Outros
                </label>
              </div>
              <div class="input-box">
                <label for="text">Patrimônio</label>
                <input
                  id="patrimonio"
                  type="text"
                  name="patrimonio"
                  placeholder="Patrimônio"
                  required
                />
              </div>
               <div class="input-box">
                <label for="text">Guarde a id do chamado:</label>
                <input type="text" id="uuid" name="uuid" readonly />
              </div>
              <input type="hidden" id="uuid" name="uuid" />
              <div class="campo">
                <form
                  action="processa_imagem_perfil.php"
                  method="post"
                  enctype="multipart/form-data"
                >
                  <label
                    >Anexos<input type="file" id="anexos" name="anexos"
                  /></label>
                  <button id="generateUUID" ;>Enviar chamado</button>
                </form>
                <div id="form_alerts"></div>

                <script>
                  function newId(base) {
                    return [
                      Math.random,
                      function () {
                        return newId.last
                          ? windowId.last + Math.random()
                          : Math.random();
                      },
                      Math.random,
                      Date.now,
                      Math.random,
                    ]
                      .map(function (fn) {
                        return fn()
                          .toString(base || 8 + Math.random() * 10)
                          .substr(-2);
                      })
                      .join("-");
                  }

                  var demo = function (base) {
                    document.getElementById("uuid").value = newId(base);
                    console.log(document.getElementById("uuid").value);
                  };
                  demo(16);
                </script>
                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <script>
                  const scriptURL =
                    "https://script.google.com/macros/s/AKfycbyOAY7WhbXa7QjlaLSn-XBC3kOBtAydZP5iW1ghXtytuYqTQwtSVIeBIDNvHDaDhuVS/exec";
                  const form = document.forms["chamados"];

                  form.addEventListener("submit", (e) => {
                    e.preventDefault();
                    fetch(scriptURL, {
                      method: "POST",
                      body: new FormData(form),
                    })
                      .then((response) =>
                        $("#form_alerts").html(
                          "<div class='alert alert-success'>Chamado enviado! Um dos nossos técnicos entrará em contato."
                        )
                      )
                      .catch((error) =>
                        $("#form_alerts").html(
                          "<div class='alert alert-danger'>Chamado não enviado. Ligue no 4310"
                        )
                      );
                  });
                </script>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </body>
</html>
